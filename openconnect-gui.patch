From 5e8dd394773c4f95844303f43a0541b9546cea73 Mon Sep 17 00:00:00 2001
From: Anton Tanasenko <atg.sleepless@gmail.com>
Date: Tue, 11 Jun 2019 23:56:11 +0300
Subject: [PATCH] Use '--' value to let stoken read .stokenrc

---
 src/vpninfo.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/vpninfo.cpp b/src/vpninfo.cpp
index e2c2b01..4e79acf 100644
--- a/src/vpninfo.cpp
+++ b/src/vpninfo.cpp
@@ -417,7 +417,7 @@ VpnInfo::VpnInfo(QString name, StoredServer* ss, MainWindow* m)
         openconnect_set_token_callbacks(this->vpninfo, this, lock_token_vfn, unlock_token_vfn);
         openconnect_set_token_mode(this->vpninfo,
             (oc_token_mode_t)ss->get_token_type(),
-            ss->get_token_str().toLatin1().data());
+            ss->get_token_str() == "--" ? NULL : ss->get_token_str().toLatin1().data());
     }
 
     openconnect_set_protocol(vpninfo, ss->get_protocol());
